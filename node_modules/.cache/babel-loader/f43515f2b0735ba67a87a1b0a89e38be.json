{"ast":null,"code":"var _jsxFileName = \"/Users/youngsangkim/Documents/GitHub/YKStudio/front/src/pages/account/Register.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { Link, useNavigate } from 'react-router-dom';\nimport './Register.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst formatContactNumber = Num => {\n  if (!Num) return Num;\n  const telPhoneNum = Num.replace(/[^\\d]/g, \"\");\n  const phoneNumberLength = telPhoneNum.length;\n  if (phoneNumberLength < 4) return telPhoneNum;\n\n  if (phoneNumberLength < 7) {\n    return `(${telPhoneNum.slice(0, 3)}) ${telPhoneNum.slice(3)}`;\n  }\n\n  return `(${telPhoneNum.slice(0, 3)}) ${telPhoneNum.slice(3, 6)}-${telPhoneNum.slice(6, 10)}`;\n};\n\nconst Register = props => {\n  _s();\n\n  const [username, setUsername] = useState('');\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [confirmPassword, setConfirmPassword] = useState('');\n  const [contact, setContact] = useState('');\n  const [error, setError] = useState('');\n  const navigate = useNavigate();\n  useEffect(() => {\n    if (!!sessionStorage.authToken) {\n      navigate('/');\n    }\n  }, []); // handlers\n\n  const phoneNumberHandler = e => {\n    const formattedPhoneNumber = formatContactNumber(e.target.value);\n    setContact(formattedPhoneNumber);\n  };\n\n  const submitHandler = async e => {\n    e.preventDefault();\n    const config = {\n      header: {\n        \"Content-Type\": \"application/json\"\n      }\n    };\n\n    if (password !== confirmPassword) {\n      setPassword('');\n      setConfirmPassword('');\n      setTimeout(() => {\n        setError('');\n      }, 10000);\n      return setError('Passwords do not match');\n    }\n\n    try {\n      const {\n        data\n      } = await axios.post(`${process.env.REACT_APP_SERVER_URL}/auth/register`, {\n        username,\n        email,\n        password,\n        contact\n      }, config);\n\n      if (!!data.success) {\n        sessionStorage.setItem(\"authToken\", data.token);\n        sessionStorage.setItem(\"role\", data.role);\n        sessionStorage.setItem(\"userId\", data.userId);\n      }\n    } catch (error) {\n      setError('The email address has already been taken');\n      setTimeout(() => {\n        setError('');\n      }, 10000);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"register_container\",\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: submitHandler,\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Register\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this), !!error && /*#__PURE__*/_jsxDEV(\"p\", {\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"errorMsg\",\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 24\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        id: \"name\",\n        required: true,\n        value: username,\n        placeholder: \"Enter your name\",\n        onChange: e => setUsername(e.target.value),\n        autoComplete: \"on\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"email\",\n        id: \"email\",\n        required: true,\n        value: email,\n        placeholder: \"Enter your email\",\n        onChange: e => setEmail(e.target.value),\n        autoComplete: \"on\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        id: \"password\",\n        required: true,\n        value: password,\n        placeholder: \"Enter your password\",\n        onChange: e => setPassword(e.target.value),\n        autoComplete: \"on\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        id: \"confirmPassword\",\n        required: true,\n        value: confirmPassword,\n        placeholder: \"Confirm your password\",\n        onChange: e => setConfirmPassword(e.target.value),\n        autoComplete: \"on\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"tel\",\n        id: \"contact\",\n        required: true,\n        value: contact,\n        placeholder: \"Enter your contact number\",\n        onChange: phoneNumberHandler,\n        autoComplete: \"on\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"Register\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"register login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Register, \"r+3lOK7PWObpS677shCqLAKCJCU=\", false, function () {\n  return [useNavigate];\n});\n\n_c = Register;\nexport default Register;\n\nvar _c;\n\n$RefreshReg$(_c, \"Register\");","map":{"version":3,"names":["useState","useEffect","axios","Link","useNavigate","formatContactNumber","Num","telPhoneNum","replace","phoneNumberLength","length","slice","Register","props","username","setUsername","email","setEmail","password","setPassword","confirmPassword","setConfirmPassword","contact","setContact","error","setError","navigate","sessionStorage","authToken","phoneNumberHandler","e","formattedPhoneNumber","target","value","submitHandler","preventDefault","config","header","setTimeout","data","post","process","env","REACT_APP_SERVER_URL","success","setItem","token","role","userId"],"sources":["/Users/youngsangkim/Documents/GitHub/YKStudio/front/src/pages/account/Register.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { Link, useNavigate } from 'react-router-dom';\nimport './Register.css'\n\nconst formatContactNumber = (Num) => {\n  if(!Num) return Num;\n\n  const telPhoneNum = Num.replace(/[^\\d]/g, \"\");\n  const phoneNumberLength = telPhoneNum.length;\n  if (phoneNumberLength < 4) return telPhoneNum;\n  if (phoneNumberLength < 7) {\n    return `(${telPhoneNum.slice(0, 3)}) ${telPhoneNum.slice(3)}`;\n  }\n  return `(${telPhoneNum.slice(0, 3)}) ${telPhoneNum.slice(\n    3,\n    6\n  )}-${telPhoneNum.slice(6, 10)}`;\n}\n\nconst Register = (props) => {\n\n  const [ username, setUsername ] = useState('');\n  const [ email, setEmail ] = useState('');\n  const [ password, setPassword ] = useState('');\n  const [ confirmPassword, setConfirmPassword] = useState('');\n  const [ contact, setContact ] = useState('');\n  const [ error, setError ] = useState('');\n\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    if (!!sessionStorage.authToken) {\n      navigate('/');\n    }\n  }, [])\n\n  // handlers\n  const phoneNumberHandler = (e) => {\n    const formattedPhoneNumber = formatContactNumber(e.target.value);\n    setContact(formattedPhoneNumber)\n  }\n\n  const submitHandler = async (e) => {\n    e.preventDefault();\n\n    const config = {\n      header: {\n        \"Content-Type\": \"application/json\"\n      }\n    }\n\n    if(password !== confirmPassword) {\n      setPassword('');\n      setConfirmPassword('');\n      setTimeout(() => {\n        setError('')\n      },10000);\n      return setError('Passwords do not match')\n    }\n\n    try {\n      const { data } = await axios.post(`${process.env.REACT_APP_SERVER_URL}/auth/register`, {username, email, password, contact}, config)\n      \n      if (!!data.success) {\n        sessionStorage.setItem(\"authToken\", data.token);\n        sessionStorage.setItem(\"role\", data.role);\n        sessionStorage.setItem(\"userId\", data.userId);\n      }\n    } catch (error) {\n      setError('The email address has already been taken')\n      setTimeout(() => {\n        setError('');\n      }, 10000)\n    }\n  }\n\n  return (\n    <div className='register_container'>\n      <form onSubmit={submitHandler}>\n        <h3>Register</h3>\n        {!!error && <p><span className='errorMsg'>{error}</span></p>}\n        <input \n          type='text'\n          id='name'\n          required\n          value={username}\n          placeholder='Enter your name'\n          onChange={(e) => setUsername(e.target.value)}\n          autoComplete='on'\n        />\n        <input \n          type='email'\n          id='email'\n          required\n          value={email}\n          placeholder='Enter your email'\n          onChange={(e) => setEmail(e.target.value)}\n          autoComplete='on'\n        />\n        <input \n          type='password'\n          id='password'\n          required\n          value={password}\n          placeholder='Enter your password'\n          onChange={(e) => setPassword(e.target.value)}\n          autoComplete='on'\n        />\n        <input \n          type='password'\n          id='confirmPassword'\n          required\n          value={confirmPassword}\n          placeholder='Confirm your password'\n          onChange={(e) => setConfirmPassword(e.target.value)}\n          autoComplete='on'\n        />\n        <input \n          type='tel'\n          id='contact'\n          required\n          value={contact}\n          placeholder='Enter your contact number'\n          onChange={phoneNumberHandler}\n          autoComplete='on'\n        />\n        <button type='submit'>Register</button>\n        <p>register login</p>\n      </form>\n    </div>\n  );\n}\nexport default Register;"],"mappings":"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"},"metadata":{},"sourceType":"module"}