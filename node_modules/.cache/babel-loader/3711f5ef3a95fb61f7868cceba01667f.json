{"ast":null,"code":"var _jsxFileName = \"/Users/youngsangkim/Documents/GitHub/YKStudio/front/src/pages/account/LogIn.js\",\n    _s = $RefreshSig$();\n\nimport { Link, useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport { useState, useEffect } from 'react';\nimport { LockClosedIcon } from '@heroicons/react/outline';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { toast } from 'react-toastify';\nimport { login, reset } from '../../features/auth/authSlice';\nimport Spinner from '../../components/spinner';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst LogIn = props => {\n  _s();\n\n  const [formData, setFormData] = useState({\n    email: '',\n    password: ''\n  });\n  const {\n    email,\n    password\n  } = formData;\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n  const {\n    user,\n    isLoading,\n    isError,\n    isSuccess,\n    message\n  } = useSelector(state => state.auth);\n\n  const changeHandler = e => {\n    setFormData(prevState => ({ ...prevState,\n      [e.target.name]: e.target.value\n    }));\n  };\n\n  const submitHandler = async e => {\n    e.preventDefault();\n    const userData = {\n      email,\n      password\n    };\n    dispatch(login(userData));\n  };\n\n  useEffect(() => {\n    if (isError) {\n      toast.error(message);\n    }\n\n    if (isSuccess || user) {\n      sessionStorage.setItem('userId', user.user.userId);\n      sessionStorage.setItem('role', user.user.role);\n      window.location.reload(false); // TODO: navigate to each roles\n\n      navigate('/');\n    }\n\n    dispatch(reset());\n  }, [user, isError, isSuccess, message, navigate, dispatch]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-full flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8\",\n    children: [isLoading ? /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 20\n    }, this) : null, /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-md w-full space-y-8\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          className: \"mx-auto h-12 w-auto\",\n          src: \"https://tailwindui.com/img/logos/workflow-mark-indigo-600.svg\",\n          alt: \"Workflow\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"mt-6 text-center text-3xl font-extrabold text-gray-900\",\n          children: \"Sign in to your account\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"mt-8 space-y-6\",\n        onSubmit: submitHandler,\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"hidden\",\n          name: \"remember\",\n          defaultValue: \"true\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"rounded-md shadow-sm -space-y-px\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"email-address\",\n              className: \"sr-only\",\n              children: \"Email address\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 76,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              id: \"email-address\",\n              name: \"email\",\n              type: \"email\",\n              autoComplete: \"email\",\n              required: true,\n              className: \"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm\",\n              placeholder: \"Email address\",\n              value: email,\n              onChange: changeHandler\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 79,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"password\",\n              className: \"sr-only\",\n              children: \"Password\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 92,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              id: \"password\",\n              name: \"password\",\n              type: \"password\",\n              autoComplete: \"current-password\",\n              required: true,\n              className: \"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm\",\n              placeholder: \"Password\",\n              value: password,\n              onChange: changeHandler\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"absolute left-0 inset-y-0 flex items-center pl-3\",\n              children: /*#__PURE__*/_jsxDEV(LockClosedIcon, {\n                className: \"h-5 w-5 text-indigo-500 group-hover:text-indigo-400\",\n                \"aria-hidden\": \"true\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 115,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 114,\n              columnNumber: 15\n            }, this), \"Sign in\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-center text-sm\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"mr-4\",\n            children: \"Don't have an account?\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/register\",\n            className: \"text-indigo-600 hover:text-indigo-500 font-medium\",\n            children: \"Create Account\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-center text-sm\",\n          children: /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/forgotpassword\",\n            className: \"font-medium text-indigo-600 hover:text-indigo-500\",\n            children: \"Forgot your password?\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 5\n  }, this);\n};\n\n_s(LogIn, \"7P5nfxNA2x7Vm9S1z50ZQSTmlwk=\", false, function () {\n  return [useNavigate, useDispatch, useSelector];\n});\n\n_c = LogIn;\nexport default LogIn;\n\nvar _c;\n\n$RefreshReg$(_c, \"LogIn\");","map":{"version":3,"names":["Link","useNavigate","axios","useState","useEffect","LockClosedIcon","useSelector","useDispatch","toast","login","reset","Spinner","LogIn","props","formData","setFormData","email","password","navigate","dispatch","user","isLoading","isError","isSuccess","message","state","auth","changeHandler","e","prevState","target","name","value","submitHandler","preventDefault","userData","error","sessionStorage","setItem","userId","role","window","location","reload"],"sources":["/Users/youngsangkim/Documents/GitHub/YKStudio/front/src/pages/account/LogIn.js"],"sourcesContent":["import { Link, useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport { useState, useEffect } from 'react';\nimport { LockClosedIcon } from '@heroicons/react/outline';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { toast } from 'react-toastify';\nimport { login, reset } from '../../features/auth/authSlice';\nimport Spinner from '../../components/spinner';\n\n\nconst LogIn = (props) => {\n\n  const [ formData, setFormData ] = useState({\n    email: '',\n    password: '',\n  })\n\n  const { email, password } = formData\n\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n\n  const { user, isLoading, isError, isSuccess, message } = useSelector((state) => state.auth)\n\n  const changeHandler = (e) => {\n    setFormData((prevState) => ({\n      ...prevState,\n      [e.target.name]: e.target.value,\n    }))\n  }\n\n  const submitHandler = async (e) => {\n    e.preventDefault();\n\n    const userData = {\n      email,\n      password,\n    }\n\n    dispatch(login(userData))\n  }\n\n  useEffect(() => {\n    if (isError) {\n      toast.error(message)\n    }\n\n    if (isSuccess || user) {\n      sessionStorage.setItem('userId', user.user.userId)\n      sessionStorage.setItem('role', user.user.role)\n      window.location.reload(false)\n      // TODO: navigate to each roles\n      navigate('/')\n    }\n\n    dispatch(reset())\n  },[user, isError, isSuccess, message, navigate, dispatch])\n\n  return (\n    <div className=\"min-h-full flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8\">\n      {isLoading ? <Spinner /> : null}\n      <div className=\"max-w-md w-full space-y-8\">\n        <div>\n          {/* TODO: Change logo image */}\n          <img\n            className=\"mx-auto h-12 w-auto\"\n            src=\"https://tailwindui.com/img/logos/workflow-mark-indigo-600.svg\"\n            alt=\"Workflow\"\n          />\n          <h2 className=\"mt-6 text-center text-3xl font-extrabold text-gray-900\">Sign in to your account</h2>\n        </div>\n        <form className=\"mt-8 space-y-6\" onSubmit={submitHandler}>\n          <input type=\"hidden\" name=\"remember\" defaultValue=\"true\" />\n          <div className=\"rounded-md shadow-sm -space-y-px\">\n            <div>\n              <label htmlFor=\"email-address\" className=\"sr-only\">\n                Email address\n              </label>\n              <input\n                id=\"email-address\"\n                name=\"email\"\n                type=\"email\"\n                autoComplete=\"email\"\n                required\n                className=\"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm\"\n                placeholder=\"Email address\"\n                value={email}\n                onChange={changeHandler}\n              />\n            </div>\n            <div>\n              <label htmlFor=\"password\" className=\"sr-only\">\n                Password\n              </label>\n              <input\n                id=\"password\"\n                name=\"password\"\n                type=\"password\"\n                autoComplete=\"current-password\"\n                required\n                className=\"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm\"\n                placeholder=\"Password\"\n                value={password}\n                onChange={changeHandler}\n              />\n            </div>\n          </div>\n\n          <div>\n            <button\n              type=\"submit\"\n              className=\"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\"\n            >\n              <span className=\"absolute left-0 inset-y-0 flex items-center pl-3\">\n                <LockClosedIcon className=\"h-5 w-5 text-indigo-500 group-hover:text-indigo-400\" aria-hidden=\"true\" />\n              </span>\n              Sign in\n            </button>\n          </div>\n\n          <div className='flex items-center justify-center text-sm'>\n            <p className='mr-4'>Don't have an account?</p>\n            <Link to='/register' className='text-indigo-600 hover:text-indigo-500 font-medium'>Create Account</Link>\n          </div>\n\n          <div className='flex items-center justify-center text-sm'>\n            <Link to='/forgotpassword' className='font-medium text-indigo-600 hover:text-indigo-500'>Forgot your password?</Link>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n}\nexport default LogIn;"],"mappings":";;;AAAA,SAASA,IAAT,EAAeC,WAAf,QAAkC,kBAAlC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,SAASC,cAAT,QAA+B,0BAA/B;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,SAASC,KAAT,QAAsB,gBAAtB;AACA,SAASC,KAAT,EAAgBC,KAAhB,QAA6B,+BAA7B;AACA,OAAOC,OAAP,MAAoB,0BAApB;;;AAGA,MAAMC,KAAK,GAAIC,KAAD,IAAW;EAAA;;EAEvB,MAAM,CAAEC,QAAF,EAAYC,WAAZ,IAA4BZ,QAAQ,CAAC;IACzCa,KAAK,EAAE,EADkC;IAEzCC,QAAQ,EAAE;EAF+B,CAAD,CAA1C;EAKA,MAAM;IAAED,KAAF;IAASC;EAAT,IAAsBH,QAA5B;EAEA,MAAMI,QAAQ,GAAGjB,WAAW,EAA5B;EACA,MAAMkB,QAAQ,GAAGZ,WAAW,EAA5B;EAEA,MAAM;IAAEa,IAAF;IAAQC,SAAR;IAAmBC,OAAnB;IAA4BC,SAA5B;IAAuCC;EAAvC,IAAmDlB,WAAW,CAAEmB,KAAD,IAAWA,KAAK,CAACC,IAAlB,CAApE;;EAEA,MAAMC,aAAa,GAAIC,CAAD,IAAO;IAC3Bb,WAAW,CAAEc,SAAD,KAAgB,EAC1B,GAAGA,SADuB;MAE1B,CAACD,CAAC,CAACE,MAAF,CAASC,IAAV,GAAiBH,CAAC,CAACE,MAAF,CAASE;IAFA,CAAhB,CAAD,CAAX;EAID,CALD;;EAOA,MAAMC,aAAa,GAAG,MAAOL,CAAP,IAAa;IACjCA,CAAC,CAACM,cAAF;IAEA,MAAMC,QAAQ,GAAG;MACfnB,KADe;MAEfC;IAFe,CAAjB;IAKAE,QAAQ,CAACV,KAAK,CAAC0B,QAAD,CAAN,CAAR;EACD,CATD;;EAWA/B,SAAS,CAAC,MAAM;IACd,IAAIkB,OAAJ,EAAa;MACXd,KAAK,CAAC4B,KAAN,CAAYZ,OAAZ;IACD;;IAED,IAAID,SAAS,IAAIH,IAAjB,EAAuB;MACrBiB,cAAc,CAACC,OAAf,CAAuB,QAAvB,EAAiClB,IAAI,CAACA,IAAL,CAAUmB,MAA3C;MACAF,cAAc,CAACC,OAAf,CAAuB,MAAvB,EAA+BlB,IAAI,CAACA,IAAL,CAAUoB,IAAzC;MACAC,MAAM,CAACC,QAAP,CAAgBC,MAAhB,CAAuB,KAAvB,EAHqB,CAIrB;;MACAzB,QAAQ,CAAC,GAAD,CAAR;IACD;;IAEDC,QAAQ,CAACT,KAAK,EAAN,CAAR;EACD,CAdQ,EAcP,CAACU,IAAD,EAAOE,OAAP,EAAgBC,SAAhB,EAA2BC,OAA3B,EAAoCN,QAApC,EAA8CC,QAA9C,CAdO,CAAT;EAgBA,oBACE;IAAK,SAAS,EAAC,wEAAf;IAAA,WACGE,SAAS,gBAAG,QAAC,OAAD;MAAA;MAAA;MAAA;IAAA,QAAH,GAAiB,IAD7B,eAEE;MAAK,SAAS,EAAC,2BAAf;MAAA,wBACE;QAAA,wBAEE;UACE,SAAS,EAAC,qBADZ;UAEE,GAAG,EAAC,+DAFN;UAGE,GAAG,EAAC;QAHN;UAAA;UAAA;UAAA;QAAA,QAFF,eAOE;UAAI,SAAS,EAAC,wDAAd;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QAPF;MAAA;QAAA;QAAA;QAAA;MAAA,QADF,eAUE;QAAM,SAAS,EAAC,gBAAhB;QAAiC,QAAQ,EAAEY,aAA3C;QAAA,wBACE;UAAO,IAAI,EAAC,QAAZ;UAAqB,IAAI,EAAC,UAA1B;UAAqC,YAAY,EAAC;QAAlD;UAAA;UAAA;UAAA;QAAA,QADF,eAEE;UAAK,SAAS,EAAC,kCAAf;UAAA,wBACE;YAAA,wBACE;cAAO,OAAO,EAAC,eAAf;cAA+B,SAAS,EAAC,SAAzC;cAAA;YAAA;cAAA;cAAA;cAAA;YAAA,QADF,eAIE;cACE,EAAE,EAAC,eADL;cAEE,IAAI,EAAC,OAFP;cAGE,IAAI,EAAC,OAHP;cAIE,YAAY,EAAC,OAJf;cAKE,QAAQ,MALV;cAME,SAAS,EAAC,4NANZ;cAOE,WAAW,EAAC,eAPd;cAQE,KAAK,EAAEjB,KART;cASE,QAAQ,EAAEW;YATZ;cAAA;cAAA;cAAA;YAAA,QAJF;UAAA;YAAA;YAAA;YAAA;UAAA,QADF,eAiBE;YAAA,wBACE;cAAO,OAAO,EAAC,UAAf;cAA0B,SAAS,EAAC,SAApC;cAAA;YAAA;cAAA;cAAA;cAAA;YAAA,QADF,eAIE;cACE,EAAE,EAAC,UADL;cAEE,IAAI,EAAC,UAFP;cAGE,IAAI,EAAC,UAHP;cAIE,YAAY,EAAC,kBAJf;cAKE,QAAQ,MALV;cAME,SAAS,EAAC,4NANZ;cAOE,WAAW,EAAC,UAPd;cAQE,KAAK,EAAEV,QART;cASE,QAAQ,EAAEU;YATZ;cAAA;cAAA;cAAA;YAAA,QAJF;UAAA;YAAA;YAAA;YAAA;UAAA,QAjBF;QAAA;UAAA;UAAA;UAAA;QAAA,QAFF,eAqCE;UAAA,uBACE;YACE,IAAI,EAAC,QADP;YAEE,SAAS,EAAC,qOAFZ;YAAA,wBAIE;cAAM,SAAS,EAAC,kDAAhB;cAAA,uBACE,QAAC,cAAD;gBAAgB,SAAS,EAAC,qDAA1B;gBAAgF,eAAY;cAA5F;gBAAA;gBAAA;gBAAA;cAAA;YADF;cAAA;cAAA;cAAA;YAAA,QAJF;UAAA;YAAA;YAAA;YAAA;UAAA;QADF;UAAA;UAAA;UAAA;QAAA,QArCF,eAiDE;UAAK,SAAS,EAAC,0CAAf;UAAA,wBACE;YAAG,SAAS,EAAC,MAAb;YAAA;UAAA;YAAA;YAAA;YAAA;UAAA,QADF,eAEE,QAAC,IAAD;YAAM,EAAE,EAAC,WAAT;YAAqB,SAAS,EAAC,mDAA/B;YAAA;UAAA;YAAA;YAAA;YAAA;UAAA,QAFF;QAAA;UAAA;UAAA;UAAA;QAAA,QAjDF,eAsDE;UAAK,SAAS,EAAC,0CAAf;UAAA,uBACE,QAAC,IAAD;YAAM,EAAE,EAAC,iBAAT;YAA2B,SAAS,EAAC,mDAArC;YAAA;UAAA;YAAA;YAAA;YAAA;UAAA;QADF;UAAA;UAAA;UAAA;QAAA,QAtDF;MAAA;QAAA;QAAA;QAAA;MAAA,QAVF;IAAA;MAAA;MAAA;MAAA;IAAA,QAFF;EAAA;IAAA;IAAA;IAAA;EAAA,QADF;AA0ED,CA1HD;;GAAMf,K;UASaX,W,EACAM,W,EAEwCD,W;;;KAZrDM,K;AA2HN,eAAeA,KAAf"},"metadata":{},"sourceType":"module"}